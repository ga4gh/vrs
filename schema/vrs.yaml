$schema: http://json-schema.org/draft/2020-12/schema
title: GA4GH-VRS-Definitions
type: object
$defs:
  Variation:
    description: A representation of the state of one or more biomolecules.
    oneOf:
    - $ref: '#/$defs/Allele'
    - $ref: '#/$defs/CopyNumberChange'
    - $ref: '#/$defs/CopyNumberCount'
    - $ref: '#/$defs/Genotype'
    - $ref: '#/$defs/Haplotype'
    discriminator:
      propertyName: type
  Expression:
    type: object
    privateTo: Variation
    maturity: Alpha
    description: Representation of a variation by a specified nomenclature or syntax
      for a Variation object.  Common examples of expressions for the description
      of molecular variation include the HGVS  and ISCN nomenclatures.
    properties:
      syntax:
        type: string
        enum:
        - hgvs.c
        - hgvs.p
        - hgvs.g
        - hgvs.m
        - hgvs.n
        - hgvs.r
        - iscn
        - gnomad
        - spdi
      value:
        type: string
      syntax_version:
        type: string
    required:
    - syntax
    - value
    additionalProperties: false
  MolecularVariation:
    description: A variation on a contiguous molecule.
    oneOf:
    - $ref: '#/$defs/Allele'
    - $ref: '#/$defs/Haplotype'
    discriminator:
      propertyName: type
  SystemicVariation:
    description: A Variation of multiple molecules in the context of a system, e.g.
      a genome, sample, or homologous chromosomes.
    oneOf:
    - $ref: '#/$defs/CopyNumberChange'
    - $ref: '#/$defs/CopyNumberCount'
    - $ref: '#/$defs/Genotype'
    discriminator:
      propertyName: type
  Allele:
    maturity: Alpha
    ga4ghDigest:
      prefix: VA
      keys:
      - location
      - state
      - type
    description: The state of a molecule at a Location.
    type: object
    properties:
      id:
        type: string
        description: The 'logical' identifier of the entity in the system of record,
          e.g. a UUID. This 'id' is  unique within a given system. The identified
          entity may have a different 'id' in a different  system, or may refer to
          an 'id' for the shared concept in another system (e.g. a CURIE).
      label:
        type: string
        description: A primary label for the entity.
      description:
        type: string
        description: A free-text description of the entity.
      extensions:
        type: array
        ordered: true
        items:
          $ref: core.json#/$defs/Extension
      digest:
        description: A sha512t24u digest created using the VRS Computed Identifier
          algorithm.
        type: string
        pattern: '[0-9A-Za-z_\-]{32}'
      type:
        type: string
        const: Allele
        default: Allele
        description: MUST be "Allele"
      expressions:
        type: array
        ordered: false
        items:
          $ref: '#/$defs/Expression'
      location:
        oneOf:
        - $ref: '#/$defs/SequenceLocation'
        - $ref: core.json#/$defs/IRI
        description: The location of the Allele
      state:
        description: An expression of the sequence state
        oneOf:
        - $ref: '#/$defs/LiteralSequenceExpression'
        - $ref: '#/$defs/ReferenceLengthExpression'
    required:
    - location
    - state
    - type
    additionalProperties: false
  Haplotype:
    maturity: Alpha
    ga4ghDigest:
      prefix: HT
      keys:
      - members
      - type
    description: A set of non-overlapping Allele members that co-occur on the same
      molecule.
    type: object
    properties:
      id:
        type: string
        description: The 'logical' identifier of the entity in the system of record,
          e.g. a UUID. This 'id' is  unique within a given system. The identified
          entity may have a different 'id' in a different  system, or may refer to
          an 'id' for the shared concept in another system (e.g. a CURIE).
      label:
        type: string
        description: A primary label for the entity.
      description:
        type: string
        description: A free-text description of the entity.
      extensions:
        type: array
        ordered: true
        items:
          $ref: core.json#/$defs/Extension
      digest:
        description: A sha512t24u digest created using the VRS Computed Identifier
          algorithm.
        type: string
        pattern: '[0-9A-Za-z_\-]{32}'
      type:
        type: string
        const: Haplotype
        default: Haplotype
        description: MUST be "Haplotype"
      expressions:
        type: array
        ordered: false
        items:
          $ref: '#/$defs/Expression'
      members:
        type: array
        ordered: false
        minItems: 2
        uniqueItems: true
        items:
          oneOf:
          - $ref: '#/$defs/Allele'
          - $ref: core.json#/$defs/IRI
        description: A list of Alleles (or IRI references to `Alleles`) that comprise
          a Haplotype. Since each `Haplotype` member MUST be an `Allele`, and all
          members MUST share a common SequenceReference, implementations MAY use a
          compact representation of Haplotype that omits type and SequenceReference
          information in individual Haplotype members. Implementations MUST transform
          compact `Allele` representations into an `Allele` when computing GA4GH identifiers.
    required:
    - members
    - type
    additionalProperties: false
  CopyNumberCount:
    maturity: Alpha
    ga4ghDigest:
      keys:
      - copies
      - subject
      - type
      prefix: CN
    type: object
    description: The absolute count of discrete copies of a Location or Gene, within
      a system (e.g. genome, cell, etc.).
    properties:
      id:
        type: string
        description: The 'logical' identifier of the entity in the system of record,
          e.g. a UUID. This 'id' is  unique within a given system. The identified
          entity may have a different 'id' in a different  system, or may refer to
          an 'id' for the shared concept in another system (e.g. a CURIE).
      label:
        type: string
        description: A primary label for the entity.
      description:
        type: string
        description: A free-text description of the entity.
      extensions:
        type: array
        ordered: true
        items:
          $ref: core.json#/$defs/Extension
      digest:
        description: A sha512t24u digest created using the VRS Computed Identifier
          algorithm.
        type: string
        pattern: '[0-9A-Za-z_\-]{32}'
      type:
        type: string
        const: CopyNumberCount
        default: CopyNumberCount
        description: MUST be "CopyNumberCount"
      expressions:
        type: array
        ordered: false
        items:
          $ref: '#/$defs/Expression'
      location:
        oneOf:
        - $ref: '#/$defs/SequenceLocation'
        - $ref: core.json#/$defs/IRI
        description: A location for which the number of systemic copies is described.
      copies:
        oneOf:
        - $ref: '#/$defs/Range'
        - type: integer
        description: The integral number of copies of the subject in a system
    required:
    - copies
    - location
    - type
    additionalProperties: false
  CopyNumberChange:
    maturity: Alpha
    ga4ghDigest:
      keys:
      - copyChange
      - subject
      - type
      prefix: CX
    type: object
    description: An assessment of the copy number of a Location or a Gene within a
      system (e.g. genome, cell, etc.) relative to a baseline ploidy.
    properties:
      id:
        type: string
        description: The 'logical' identifier of the entity in the system of record,
          e.g. a UUID. This 'id' is  unique within a given system. The identified
          entity may have a different 'id' in a different  system, or may refer to
          an 'id' for the shared concept in another system (e.g. a CURIE).
      label:
        type: string
        description: A primary label for the entity.
      description:
        type: string
        description: A free-text description of the entity.
      extensions:
        type: array
        ordered: true
        items:
          $ref: core.json#/$defs/Extension
      digest:
        description: A sha512t24u digest created using the VRS Computed Identifier
          algorithm.
        type: string
        pattern: '[0-9A-Za-z_\-]{32}'
      type:
        type: string
        const: CopyNumberChange
        default: CopyNumberChange
        description: MUST be "CopyNumberChange"
      expressions:
        type: array
        ordered: false
        items:
          $ref: '#/$defs/Expression'
      location:
        oneOf:
        - $ref: '#/$defs/SequenceLocation'
        - $ref: core.json#/$defs/IRI
        description: A location for which the number of systemic copies is described.
      copyChange:
        type: string
        enum:
        - efo:0030069
        - efo:0020073
        - efo:0030068
        - efo:0030067
        - efo:0030064
        - efo:0030070
        - efo:0030071
        - efo:0030072
        description: MUST be one of "efo:0030069" (complete genomic loss), "efo:0020073"
          (high-level loss), "efo:0030068" (low-level loss), "efo:0030067" (loss),
          "efo:0030064" (regional base ploidy), "efo:0030070" (gain), "efo:0030071"
          (low-level gain), "efo:0030072" (high-level gain).
    required:
    - copyChange
    - location
    - type
    additionalProperties: false
  Genotype:
    maturity: Alpha
    ga4ghDigest:
      keys:
      - count
      - members
      - type
      prefix: GT
    description: A quantified set of _in-trans_ MolecularVariation at a genomic locus.
    type: object
    properties:
      id:
        type: string
        description: The 'logical' identifier of the entity in the system of record,
          e.g. a UUID. This 'id' is  unique within a given system. The identified
          entity may have a different 'id' in a different  system, or may refer to
          an 'id' for the shared concept in another system (e.g. a CURIE).
      label:
        type: string
        description: A primary label for the entity.
      description:
        type: string
        description: A free-text description of the entity.
      extensions:
        type: array
        ordered: true
        items:
          $ref: core.json#/$defs/Extension
      digest:
        description: A sha512t24u digest created using the VRS Computed Identifier
          algorithm.
        type: string
        pattern: '[0-9A-Za-z_\-]{32}'
      type:
        type: string
        const: Genotype
        default: Genotype
        description: MUST be "Genotype"
      expressions:
        type: array
        ordered: false
        items:
          $ref: '#/$defs/Expression'
      members:
        type: array
        ordered: false
        uniqueItems: true
        minItems: 1
        items:
          $ref: '#/$defs/GenotypeMember'
        description: Each GenotypeMember in `members` describes a MolecularVariation
          and the count of that variation at the locus.
      count:
        oneOf:
        - $ref: '#/$defs/Range'
        - type: integer
        description: The total number of copies of all MolecularVariation at this
          locus, MUST be greater than or equal to the sum of GenotypeMember copy counts.
          If greater than the total counts, this implies additional MolecularVariation
          that are expected to exist but are not explicitly indicated.
    required:
    - count
    - members
    - type
    additionalProperties: false
  SequenceLocation:
    maturity: Alpha
    ga4ghDigest:
      keys:
      - end
      - sequence
      - start
      - type
      prefix: SL
    description: A Location defined by an interval on a referenced Sequence.
    type: object
    properties:
      id:
        type: string
        description: The 'logical' identifier of the entity in the system of record,
          e.g. a UUID. This 'id' is  unique within a given system. The identified
          entity may have a different 'id' in a different  system, or may refer to
          an 'id' for the shared concept in another system (e.g. a CURIE).
      label:
        type: string
        description: A primary label for the entity.
      description:
        type: string
        description: A free-text description of the entity.
      extensions:
        type: array
        ordered: true
        items:
          $ref: core.json#/$defs/Extension
      digest:
        description: A sha512t24u digest created using the VRS Computed Identifier
          algorithm.
        type: string
        pattern: '[0-9A-Za-z_\-]{32}'
      type:
        type: string
        const: SequenceLocation
        default: SequenceLocation
        description: MUST be "SequenceLocation"
      sequenceReference:
        oneOf:
        - $ref: '#/$defs/SequenceReference'
        - $ref: core.json#/$defs/IRI
        description: A SequenceReference.
      start:
        oneOf:
        - $ref: '#/$defs/Range'
        - type: integer
        description: The start coordinate or range of the SequenceLocation. The minimum
          value of this coordinate or range is 0. MUST represent a coordinate or range
          less than the value of `end`.
      end:
        oneOf:
        - $ref: '#/$defs/Range'
        - type: integer
        description: The end coordinate or range of the SequenceLocation. The minimum
          value of this coordinate or range is 0. MUST represent a coordinate or range
          greater than the value of `start`.
    required:
    - end
    - start
    - type
    additionalProperties: false
  SequenceReference:
    maturity: Alpha
    ga4ghDigest:
      assigned: true
    type: object
    description: A sequence of nucleic or amino acid character codes.
    properties:
      id:
        type: string
        description: The 'logical' identifier of the entity in the system of record,
          e.g. a UUID. This 'id' is  unique within a given system. The identified
          entity may have a different 'id' in a different  system, or may refer to
          an 'id' for the shared concept in another system (e.g. a CURIE).
      label:
        type: string
        description: A primary label for the entity.
      description:
        type: string
        description: A free-text description of the entity.
      extensions:
        type: array
        ordered: true
        items:
          $ref: core.json#/$defs/Extension
      digest:
        description: A sha512t24u digest created using the VRS Computed Identifier
          algorithm.
        type: string
        pattern: '[0-9A-Za-z_\-]{32}'
      type:
        type: string
        const: SequenceReference
      refgetAccession:
        description: A `GA4GH RefGet <http://samtools.github.io/hts-specs/refget.html>`
          identifier for the referenced sequence, using the sha512t24u digest.
        type: string
        pattern: SQ.[0-9A-Za-z_\-]{32}
      residueAlphabet:
        type: string
        description: The interpretation of the character codes referred to by the
          refget accession, where "aa" specifies an amino acid character set, and
          "na" specifies a nucleic acid character set.
        enum:
        - aa
        - na
    required:
    - refgetAccession
    - type
    additionalProperties: false
  SequenceExpression:
    description: An expression describing a Sequence.
    oneOf:
    - $ref: '#/$defs/LiteralSequenceExpression'
    - $ref: '#/$defs/ReferenceLengthExpression'
    discriminator:
      propertyName: type
  ReferenceLengthExpression:
    maturity: Alpha
    description: An expression of a length of a sequence from a repeating reference.
    type: object
    properties:
      id:
        type: string
        description: The 'logical' identifier of the entity in the system of record,
          e.g. a UUID. This 'id' is  unique within a given system. The identified
          entity may have a different 'id' in a different  system, or may refer to
          an 'id' for the shared concept in another system (e.g. a CURIE).
      label:
        type: string
        description: A primary label for the entity.
      description:
        type: string
        description: A free-text description of the entity.
      extensions:
        type: array
        ordered: true
        items:
          $ref: core.json#/$defs/Extension
      digest:
        description: A sha512t24u digest created using the VRS Computed Identifier
          algorithm.
        type: string
        pattern: '[0-9A-Za-z_\-]{32}'
      type:
        type: string
        const: ReferenceLengthExpression
        default: ReferenceLengthExpression
        description: MUST be "ReferenceLengthExpression"
      length:
        oneOf:
        - $ref: '#/$defs/Range'
        - type: integer
        description: The number of residues in the expressed sequence.
      sequence:
        $ref: '#/$defs/SequenceString'
        description: the Sequence encoded by the Reference Length Expression.
      repeatSubunitLength:
        type: integer
        description: The number of residues in the repeat subunit.
    required:
    - length
    - repeatSubunitLength
    - type
    additionalProperties: false
  LiteralSequenceExpression:
    maturity: Alpha
    description: An explicit expression of a Sequence.
    type: object
    properties:
      id:
        type: string
        description: The 'logical' identifier of the entity in the system of record,
          e.g. a UUID. This 'id' is  unique within a given system. The identified
          entity may have a different 'id' in a different  system, or may refer to
          an 'id' for the shared concept in another system (e.g. a CURIE).
      label:
        type: string
        description: A primary label for the entity.
      description:
        type: string
        description: A free-text description of the entity.
      extensions:
        type: array
        ordered: true
        items:
          $ref: core.json#/$defs/Extension
      digest:
        description: A sha512t24u digest created using the VRS Computed Identifier
          algorithm.
        type: string
        pattern: '[0-9A-Za-z_\-]{32}'
      type:
        type: string
        const: LiteralSequenceExpression
        default: LiteralSequenceExpression
        description: MUST be "LiteralSequenceExpression"
      sequence:
        $ref: '#/$defs/SequenceString'
        description: the literal sequence
    required:
    - sequence
    - type
    additionalProperties: false
  GenotypeMember:
    privateTo: Genotype
    description: A class for expressing the count of a specific MolecularVariation
      present _in-trans_ at a genomic locus represented by a Genotype.
    type: object
    properties:
      id:
        type: string
        description: The 'logical' identifier of the entity in the system of record,
          e.g. a UUID. This 'id' is  unique within a given system. The identified
          entity may have a different 'id' in a different  system, or may refer to
          an 'id' for the shared concept in another system (e.g. a CURIE).
      label:
        type: string
        description: A primary label for the entity.
      description:
        type: string
        description: A free-text description of the entity.
      extensions:
        type: array
        ordered: true
        items:
          $ref: core.json#/$defs/Extension
      digest:
        description: A sha512t24u digest created using the VRS Computed Identifier
          algorithm.
        type: string
        pattern: '[0-9A-Za-z_\-]{32}'
      count:
        oneOf:
        - $ref: '#/$defs/Range'
        - type: integer
        description: The number of copies of the `variation` at a Genotype locus.
      variation:
        oneOf:
        - $ref: '#/$defs/Allele'
        - $ref: '#/$defs/Haplotype'
        description: A MolecularVariation at a Genotype locus.
    required:
    - count
    - variation
    additionalProperties: false
  Range:
    maturity: Alpha
    description: An inclusive range of values bounded by one or more integers.
    type: array
    ordered: true
    items:
      oneOf:
      - type: integer
      - type: 'null'
    maxItems: 2
    minItems: 2
  Residue:
    maturity: Alpha
    description: A character representing a specific residue (i.e., molecular species)
      or groupings of these ("ambiguity codes"), using [one-letter IUPAC abbreviations](https://en.wikipedia.org/wiki/International_Union_of_Pure_and_Applied_Chemistry#Amino_acid_and_nucleotide_base_codes)
      for nucleic acids and amino acids.
    type: string
    pattern: '[A-Z*\-]'
  SequenceString:
    maturity: Alpha
    description: "A character string of Residues that represents a biological sequence\
      \ using the conventional sequence order (5\u2019-to-3\u2019 for nucleic acid\
      \ sequences, and amino-to-carboxyl for amino acid sequences). IUPAC ambiguity\
      \ codes are permitted in Sequence Strings."
    type: string
    pattern: ^[A-Z*\-]*$
